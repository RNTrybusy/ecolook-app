<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoLook MVP</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
    <style>
        body {
            font-family: 'Arial', sans-serif; /* Using a common sans-serif font */
            background-color: #e0f2f7; /* Light blue background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            margin: 0;
            overflow-y: auto; /* Allow scrolling if content overflows */
        }
        .container {
            background-color: #ffffff; /* White background for container */
            padding: 30px;
            border-radius: 15px; /* More rounded corners */
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2); /* Stronger shadow */
            max-width: 500px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-sizing: border-box; /* Include padding in width */
            position: relative; /* Needed for absolute positioning of about button */
        }
        h1 {
            color: #00796b; /* Teal color for heading */
            margin-bottom: 10px;
            font-size: 1.8em; /* Slightly larger heading */
        }
         .intro-text {
            color: #555;
            margin-bottom: 20px;
            font-size: 1em;
            line-height: 1.5;
            text-align: center;
        }
        #camera-feed, #captured-image, #camera-placeholder { /* Added #camera-placeholder */
            width: 100%;
            max-height: 350px; /* Slightly increased max height */
            object-fit: cover;
            border-radius: 10px; /* Rounded corners for media */
            margin-bottom: 20px;
            background-color: #cfd8dc; /* Light grey placeholder */
            border: 1px solid #b0bec5; /* Subtle border */
            display: flex; /* Use flex for placeholder to center content */
            justify-content: center;
            align-items: center;
            font-size: 3em; /* Size for icon/text */
            color: #546e7a; /* Color for icon/text */
        }
         #captured-image {
             object-fit: contain; /* Use contain for captured image */
         }
         #camera-placeholder {
             /* Initial state is visible */
             display: flex; /* Show placeholder initially */
         }
         #camera-feed, #captured-image {
             display: none; /* Hide camera feed and captured image initially */
         }

        button {
            background-color: #00796b; /* Teal color for buttons */
            color: white;
            padding: 12px 24px; /* Increased padding */
            border: none;
            border-radius: 25px; /* Pill-shaped buttons */
            cursor: pointer;
            font-size: 1em; /* Standard font size */
            transition: background-color 0.3s ease, transform 0.1s ease;
            margin-top: 10px;
            font-weight: bold; /* Bold text */
        }
        button:hover:not(:disabled) {
            background-color: #004d40; /* Darker teal on hover */
            transform: translateY(-2px); /* Slight lift effect */
        }
         button:active:not(:disabled) {
             transform: translateY(0); /* Press down effect */
         }
         button:disabled {
            background-color: #b0bec5; /* Grey for disabled */
            cursor: not-allowed;
            box-shadow: none;
        }
         button#scan-another-btn {
             background-color: #546e7a; /* Different color for scan another */
         }
         button#scan-another-btn:hover:not(:disabled) {
             background-color: #37474f;
         }
         button#clear-results-btn { /* Style for the new clear button */
             background-color: #e57373; /* Reddish color */
             display: none; /* Hidden initially */
         }
          button#clear-results-btn:hover:not(:disabled) {
             background-color: #ef5350;
         }

         button#about-btn {
             position: absolute;
             top: 15px;
             right: 15px;
             background: none;
             border: none;
             color: #00796b;
             font-size: 1.5em;
             cursor: pointer;
             padding: 5px;
             margin: 0;
             transition: color 0.3s ease;
         }
         button#about-btn:hover {
             color: #004d40;
             transform: none; /* Override button hover effect */
         }


        #feedback {
            margin-top: 20px;
            font-style: italic;
            color: #555;
            min-height: 1.5em; /* Increased min-height */
            text-align: center; /* Center feedback text */
        }
        #results {
            margin-top: 30px;
            text-align: left;
            width: 100%;
            border-top: 1px solid #cfd8dc; /* Separator line */
            padding-top: 20px;
        }
        #results h3 {
            margin-bottom: 15px;
            color: #00796b; /* Teal color */
            font-size: 1.2em;
            text-align: center; /* Center results heading */
        }
         .mock-data-indicator { /* Style for mock data indicator */
             font-size: 0.9em;
             color: #757575;
             text-align: center;
             margin-bottom: 10px;
         }
        #results ul {
            list-style: none;
            padding: 0;
        }
        #results li {
            background-color: #e0f2f7; /* Light blue for list items */
            padding: 15px; /* Increased padding */
            border-radius: 8px; /* Rounded corners for list items */
            margin-bottom: 15px; /* Increased margin */
            border: 1px solid #b2ebf2; /* Subtle border */
        }
         #results li strong {
             color: #004d40; /* Darker teal for store names */
         }
        /* Basic Loading Indicator Style */
        .loading::after {
            content: ' .';
            animation: loading-dots 1s infinite;
        }
        @keyframes loading-dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60% { content: '...'; }
            80%, 100% { content: ''; } /* Optional: make it disappear briefly */
        }

        /* Modal Styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.6); /* Black w/ opacity */
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 30px;
            border-radius: 10px;
            max-width: 90%; /* Responsive width */
            width: 400px; /* Max width */
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
        }

        .close-button {
            color: #aaa;
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-button:hover,
        .close-button:focus {
            color: #000;
            text-decoration: none;
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            h1 {
                font-size: 1.5em;
            }
            button {
                padding: 10px 20px;
                font-size: 0.9em;
            }
             .modal-content {
                 padding: 20px;
             }
             .close-button {
                 font-size: 24px;
                 right: 10px;
             }
        }
    </style>

    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="EcoLook">
    </head>
<body>
    <div class="container">
        <h1>EcoLook</h1>
        <p class="intro-text">Escaneie uma pe√ßa de roupa com a c√¢mera do seu celular para descobrir alternativas sustent√°veis e lojas pr√≥ximas!</p>

        <div id="camera-placeholder">
            üì∏
        </div>

        <video id="camera-feed" autoplay playsinline></video>
        <img id="captured-image" alt="Foto da roupa capturada">

        <button id="capture-btn" aria-label="Escanear Roupa">Escanear Roupa</button>
        <button id="scan-another-btn" style="display: none;" aria-label="Escanear Outra Roupa">Escanear Outra Roupa</button>
         <button id="clear-results-btn" aria-label="Limpar Resultados">Limpar Resultados</button>


        <button id="about-btn" aria-label="Sobre o aplicativo">?</button>

        <div id="feedback" role="status" aria-live="polite"></div>

        <div id="results" style="display: none;">
            <h3>Resultados</h3>
            <p id="sustainable-suggestion"></p>
            <h3 class="mt-4">Lojas Pr√≥ximas:</h3>
             <p class="mock-data-indicator">(Dados simulados para MVP)</p>
            <ul id="nearby-stores-list">
                </ul>
        </div>
    </div>

    <div id="about-modal" class="modal">
      <div class="modal-content">
        <span class="close-button" id="close-modal-btn">&times;</span>
        <h2>Sobre o EcoLook MVP</h2>
        <p>Este √© um MVP (Minimum Viable Product) do EcoLook, um aplicativo para ajudar voc√™ a encontrar alternativas de moda mais sustent√°vel.</p>
        <p><strong>Como funciona:</strong></p>
        <ol class="list-decimal list-inside">
            <li>Use a c√¢mera para escanear uma pe√ßa de roupa.</li>
            <li>O aplicativo (usando Google Gemini) tentar√° identificar o tipo de pe√ßa.</li>
            <li>Sugeriremos um tipo de alternativa sustent√°vel para essa pe√ßa.</li>
            <li>Buscaremos (simuladamente neste MVP) lojas de moda sustent√°vel ou brech√≥s pr√≥ximos √† sua localiza√ß√£o.</li>
        </ol>
        <p class="mt-4 text-sm text-gray-600"><strong>Nota sobre a busca de lojas:</strong> Neste MVP, a lista de lojas pr√≥ximas √© simulada devido a limita√ß√µes de APIs gratuitas para busca de neg√≥cios espec√≠ficos. Em uma vers√£o completa, usar√≠amos APIs pagas (como Google Places) ou uma solu√ß√£o de backend mais complexa para fornecer resultados reais e precisos.</p>
         <p class="mt-2 text-sm text-gray-600">Desenvolvido com ‚ù§Ô∏è e IA.</p>
      </div>
    </div>


    <script>
        // --- Configura√ß√£o do Backend ---
        // URL do seu backend FastAPI. Se estiver rodando localmente, use o endere√ßo e porta corretos.
        // Exemplo: http://127.0.0.1:8000 se estiver rodando com `uvicorn main:app --reload` na porta 8000
        const BACKEND_URL = 'http://127.0.0.1:8000'; // <-- Atualize esta URL conforme onde seu backend estiver rodando

        const cameraFeed = document.getElementById('camera-feed');
        const capturedImage = document.getElementById('captured-image');
        const cameraPlaceholder = document.getElementById('camera-placeholder'); // Novo elemento placeholder
        const captureBtn = document.getElementById('capture-btn');
        const scanAnotherBtn = document.getElementById('scan-another-btn'); // Novo bot√£o
        const clearResultsBtn = document.getElementById('clear-results-btn'); // Novo bot√£o Limpar Resultados
        const aboutBtn = document.getElementById('about-btn'); // Bot√£o "Sobre"
        const feedbackDiv = document.getElementById('feedback');
        const resultsDiv = document.getElementById('results');
        const sustainableSuggestionP = document.getElementById('sustainable-suggestion');
        const nearbyStoresListUl = document.getElementById('nearby-stores-list');
        const aboutModal = document.getElementById('about-modal'); // O Modal
        const closeModalBtn = document.getElementById('close-modal-btn'); // Bot√£o fechar modal

        let currentStream;

        // --- Registro do Service Worker (para PWA) ---
        // Este c√≥digo tenta registrar o service worker. O arquivo service-worker.js precisa existir.
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registrado com sucesso:', registration.scope);
                    })
                    .catch(err => {
                        console.error('Falha ao registrar Service Worker:', err);
                    });
            });
        }


        // Fun√ß√£o para iniciar a c√¢mera
        async function startCamera() {
            // Esconde resultados e bot√£o de limpar
            resultsDiv.style.display = 'none';
            clearResultsBtn.style.display = 'none';
            nearbyStoresListUl.innerHTML = ''; // Limpa resultados anteriores
            sustainableSuggestionP.textContent = ''; // Limpa sugest√£o anterior


            // Verifica se a API de m√≠dia est√° dispon√≠vel
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                feedbackDiv.textContent = 'Seu navegador n√£o suporta acesso √† c√¢mera.';
                console.error('API navigator.mediaDevices.getUserMedia n√£o dispon√≠vel.');
                cameraPlaceholder.style.display = 'flex'; // Mostra placeholder em caso de erro
                cameraPlaceholder.textContent = 'üö´'; // √çcone de erro
                captureBtn.style.display = 'none'; // Esconde o bot√£o de captura
                scanAnotherBtn.style.display = 'none'; // Esconde o bot√£o de escanear outra
                return;
            }

            // Verifica se est√° em um ambiente seguro (HTTPS ou localhost)
            if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {
                 feedbackDiv.innerHTML = 'O acesso √† c√¢mera requer um ambiente seguro (HTTPS) ou localhost.<br>Por favor, execute em um servidor web.';
                 console.error('Acesso √† c√¢mera bloqueado em ambiente n√£o seguro.');
                 cameraPlaceholder.style.display = 'flex'; // Mostra placeholder em caso de erro
                 cameraPlaceholder.textContent = 'üîí'; // √çcone de cadeado
                 captureBtn.style.display = 'none'; // Esconde o bot√£o de captura
                 scanAnotherBtn.style.display = 'none'; // Esconde o bot√£o de escanear outra
                 return;
            }


            try {
                feedbackDiv.textContent = 'Solicitando acesso √† c√¢mera...';
                cameraPlaceholder.style.display = 'none'; // Esconde placeholder ao tentar iniciar c√¢mera
                const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
                cameraFeed.srcObject = stream;
                currentStream = stream;
                cameraFeed.style.display = 'block'; // Mostra o feed da c√¢mera
                capturedImage.style.display = 'none'; // Esconde a imagem capturada
                captureBtn.style.display = 'block'; // Mostra o bot√£o de captura
                scanAnotherBtn.style.display = 'none'; // Esconde o bot√£o de escanear outra
                feedbackDiv.textContent = 'Posicione a roupa na frente da c√¢mera.';
                resultsDiv.style.display = 'none';
            } catch (err) {
                console.error("Erro ao acessar a c√¢mera:", err);
                cameraPlaceholder.style.display = 'flex'; // Mostra placeholder em caso de erro
                cameraFeed.style.display = 'none'; // Esconde feed da c√¢mera
                capturedImage.style.display = 'none'; // Esconde imagem capturada

                if (err.name === 'NotAllowedError' || err.name === 'PermissionDeniedError') {
                    feedbackDiv.textContent = 'Permiss√£o da c√¢mera negada. Por favor, permita o acesso nas configura√ß√µes do navegador.';
                     cameraPlaceholder.textContent = '‚úã'; // √çcone de m√£o
                } else if (err.name === 'NotFoundError' || err.name === 'DevicesNotFoundError') {
                     feedbackDiv.textContent = 'Nenhuma c√¢mera encontrada no dispositivo.';
                     cameraPlaceholder.textContent = '‚ùì'; // √çcone de interroga√ß√£o
                } else if (err.name === 'NotReadableError' || err.name === 'OverconstrainedError') {
                     feedbackDiv.textContent = 'A c√¢mera est√° em uso ou houve um problema ao acess√°-la.';
                     cameraPlaceholder.textContent = '‚ö†Ô∏è'; // √çcone de aviso
                }
                else {
                    feedbackDiv.textContent = `Erro ao acessar a c√¢mera: ${err.message}`;
                    cameraPlaceholder.textContent = '‚ùå'; // √çcone de erro
                }
                 captureBtn.style.display = 'none'; // Esconde o bot√£o de captura se a c√¢mera falhar
                 scanAnotherBtn.style.display = 'block'; // Mostra o bot√£o de tentar novamente (escanear outra)
            }
        }

        // Fun√ß√£o para parar a c√¢mera
        function stopCamera() {
            if (currentStream) {
                currentStream.getTracks().forEach(track => track.stop());
            }
        }

        // Event listener para o bot√£o de captura
        captureBtn.addEventListener('click', async () => {
            if (!currentStream) {
                feedbackDiv.textContent = 'A c√¢mera n√£o est√° ativa ou n√£o p√¥de ser iniciada.';
                return;
            }

            // Desabilita o bot√£o de captura e mostra feedback de carregamento
            captureBtn.disabled = true;
            feedbackDiv.textContent = 'Capturando imagem...';
            feedbackDiv.classList.add('loading'); // Adiciona classe para anima√ß√£o de loading

            // Parar a c√¢mera e capturar a imagem
            stopCamera();
            const canvas = document.createElement('canvas');
            canvas.width = cameraFeed.videoWidth;
            canvas.height = cameraFeed.videoHeight;
            const context = canvas.getContext('2d');
            context.drawImage(cameraFeed, 0, 0, canvas.width, canvas.height);
            const imageDataUrl = canvas.toDataURL('image/png');

            // Esconde o feed da c√¢mera e o placeholder, exibe a imagem capturada
            cameraFeed.style.display = 'none';
            cameraPlaceholder.style.display = 'none';
            capturedImage.src = imageDataUrl;
            capturedImage.style.display = 'block';

            captureBtn.style.display = 'none'; // Esconde o bot√£o de captura
            scanAnotherBtn.style.display = 'none'; // Esconde o bot√£o de escanear outra temporariamente
            clearResultsBtn.style.display = 'none'; // Esconde o bot√£o de limpar resultados


            feedbackDiv.textContent = 'Obtendo localiza√ß√£o...';
            resultsDiv.style.display = 'none';
            nearbyStoresListUl.innerHTML = ''; // Limpa resultados anteriores


            // --- Obter Localiza√ß√£o do Usu√°rio ---
            // Obtemos a localiza√ß√£o no frontend e a enviamos para o backend.
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(async (position) => {
                    const userLocation = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };

                    feedbackDiv.textContent = 'Enviando imagem e localiza√ß√£o para an√°lise...';

                    // --- Chamar o Backend para An√°lise e Busca ---
                    try {
                        const formData = new FormData();
                        formData.append('imageDataUrl', imageDataUrl);
                        formData.append('userLocation', JSON.stringify(userLocation)); // Envia localiza√ß√£o como string JSON

                        const response = await fetch(`${BACKEND_URL}/analyze_and_find_stores`, {
                            method: 'POST',
                            body: formData // Usa FormData para enviar string base64 e JSON
                        });

                        const result = await response.json();

                        if (!response.ok) {
                            // Trata erros retornados pelo backend (HTTPException)
                            console.error("Erro do Backend:", response.status, result);
                            // Exibe o detalhe do erro retornado pelo backend se dispon√≠vel
                            feedbackDiv.textContent = `Erro: ${result.detail || 'Erro desconhecido do backend.'}`;
                            resultsDiv.style.display = 'none'; // Garante que resultados n√£o sejam exibidos em caso de erro
                        } else {
                            // Processa a resposta de sucesso do backend
                            console.log("Resposta do Backend:", result);

                            const identifiedClothing = result.identifiedClothing;
                            const sustainableSuggestion = result.sustainableSuggestion;
                            const nearbyStores = result.nearbyStores; // Recebe os dados mock do backend

                            // Atualiza feedback com an√°lise e sugest√£o
                            feedbackDiv.textContent = `Identificado: ${identifiedClothing}. Sugest√£o: ${sustainableSuggestion}`;
                            sustainableSuggestionP.textContent = sustainableSuggestion; // Exibe a sugest√£o na √°rea de resultados

                            // Adiciona um pequeno delay antes de mostrar a busca de lojas
                            await new Promise(resolve => setTimeout(resolve, 1500)); // Pausa de 1.5 segundos

                            // Atualiza o feedback para indicar a busca de lojas (mesmo que mock)
                            feedbackDiv.textContent = 'Buscando lojas pr√≥ximas... (dados simulados)';


                            // Simula um pequeno delay antes de exibir os resultados das lojas (para dar tempo de ler a sugest√£o)
                            await new Promise(resolve => setTimeout(resolve, 1000));

                            feedbackDiv.textContent = 'Resultados encontrados:'; // Feedback final antes de exibir a lista
                            resultsDiv.style.display = 'block';
                            displayNearbyStores(nearbyStores);
                        }

                    } catch (error) {
                        console.error("Erro na comunica√ß√£o com o backend:", error);
                        feedbackDiv.textContent = `Erro de comunica√ß√£o com o servidor: ${error.message}`;
                         resultsDiv.style.display = 'none'; // Garante que resultados n√£o sejam exibidos em caso de erro
                    } finally {
                        feedbackDiv.classList.remove('loading'); // Remove loading ap√≥s a resposta (sucesso ou erro)
                        scanAnotherBtn.style.display = 'block'; // Mostra o bot√£o de escanear outra
                        captureBtn.disabled = false; // Reabilita o bot√£o de captura (se ele for mostrado novamente)
                         clearResultsBtn.style.display = 'block'; // Mostra o bot√£o de limpar resultados ap√≥s processamento
                    }

                }, (error) => {
                    console.error("Erro ao obter localiza√ß√£o:", error);
                    feedbackDiv.textContent = 'Erro ao obter sua localiza√ß√£o real. N√£o foi poss√≠vel contatar o backend.';
                    resultsDiv.style.display = 'none';
                    nearbyStoresListUl.innerHTML = ''; // Limpa resultados anteriores
                    feedbackDiv.classList.remove('loading'); // Remove loading em caso de erro de geolocaliza√ß√£o
                    scanAnotherBtn.style.display = 'block'; // Mostra o bot√£o de escanear outra
                    captureBtn.disabled = false; // Reabilita o bot√£o de captura
                     clearResultsBtn.style.display = 'block'; // Mostra o bot√£o de limpar resultados mesmo com erro de localiza√ß√£o
                });
            } else {
                feedbackDiv.textContent = 'Geolocaliza√ß√£o n√£o suportada neste navegador. N√£o foi poss√≠vel contatar o backend.';
                 resultsDiv.style.display = 'none';
                 nearbyStoresListUl.innerHTML = ''; // Limpa resultados anteriores
                 feedbackDiv.classList.remove('loading'); // Remove loading em caso de geolocaliza√ß√£o n√£o suportada
                 scanAnotherBtn.style.display = 'block'; // Mostra o bot√£o de escanear outra
                 captureBtn.disabled = false; // Reabilita o bot√£o de captura
                 clearResultsBtn.style.display = 'block'; // Mostra o bot√£o de limpar resultados
            }
        });

        // Event listener para o bot√£o "Escanear Outra Roupa"
        scanAnotherBtn.addEventListener('click', () => {
            startCamera(); // Reinicia o fluxo iniciando a c√¢mera
        });

        // Event listener para o bot√£o "Limpar Resultados"
        clearResultsBtn.addEventListener('click', () => {
            stopCamera(); // Garante que a c√¢mera esteja parada
            cameraFeed.srcObject = null; // Limpa o feed da c√¢mera
            cameraFeed.style.display = 'none'; // Esconde o feed da c√¢mera
            capturedImage.style.display = 'none'; // Esconde a imagem capturada
            cameraPlaceholder.style.display = 'flex'; // Mostra o placeholder
            cameraPlaceholder.textContent = 'üì∏'; // Reseta o √≠cone do placeholder

            resultsDiv.style.display = 'none'; // Esconde a se√ß√£o de resultados
            nearbyStoresListUl.innerHTML = ''; // Limpa a lista de lojas
            sustainableSuggestionP.textContent = ''; // Limpa a sugest√£o

            feedbackDiv.textContent = 'Resultados limpos. Pronto para escanear novamente.'; // Feedback
            scanAnotherBtn.style.display = 'none'; // Esconde o bot√£o de escanear outra
            clearResultsBtn.style.display = 'none'; // Esconde o bot√£o de limpar
            captureBtn.style.display = 'block'; // Mostra o bot√£o de captura
            captureBtn.disabled = false; // Garante que o bot√£o de captura esteja habilitado
        });


        // --- L√≥gica do Modal "Sobre" ---
        // Event listener para abrir o modal
        aboutBtn.addEventListener('click', () => {
            aboutModal.style.display = 'flex'; // Usa flex para centralizar o conte√∫do
        });

        // Event listener para fechar o modal clicando no X
        closeModalBtn.addEventListener('click', () => {
            aboutModal.style.display = 'none';
        });

        // Event listener para fechar o modal clicando fora dele
        window.addEventListener('click', (event) => {
            if (event.target === aboutModal) {
                aboutModal.style.display = 'none';
            }
        });


        // --- Fun√ß√µes Auxiliares ---

        // Fun√ß√£o para exibir a lista de lojas
        function displayNearbyStores(stores) {
            if (!stores || stores.length === 0) { // Verifica se a lista de stores √© v√°lida e n√£o vazia
                nearbyStoresListUl.innerHTML = '<li>Nenhuma loja sustent√°vel ou brech√≥ encontrado pr√≥ximo.</li>';
                return;
            }
            nearbyStoresListUl.innerHTML = ''; // Limpa a lista antes de adicionar novos itens
            stores.forEach(store => {
                const li = document.createElement('li');
                li.innerHTML = `<strong>${store.name}</strong><br>${store.address}<br>(${store.distance})`;
                nearbyStoresListUl.appendChild(li);
            });
        }

        // Chamar a fun√ß√£o para iniciar a c√¢mera quando a janela carregar
        window.addEventListener('load', startCamera);

    </script>
    </body>
</html>
